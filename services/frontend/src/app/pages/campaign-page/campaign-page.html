<div class="layout">
  <app-side-nav />

  <main class="content">
    <app-header
      [title]="'Campaign List'"
      [query]="query()"
      [deletableCount]="selectedCount()"
      [filterOpen]="filterOpen()"
      [campaignAssignmentFilter]="assignmentFilter()"
      [campaignTypeFilter]="typeFilter()"
      [campaignActiveFilter]="activeFilter()"
      [addButtonText]="'+ Add campaign'"
      [showFilters]="true"
      (queryChange)="query.set($event)"
      (openFilters)="onOpenFilters()"
      (campaignAssignmentFilterSelect)="onAssignmentFilterSelect($event)"
      (campaignTypeFilterSelect)="onTypeFilterSelect($event)"
      (campaignActiveFilterSelect)="onActiveFilterSelect($event)"
      (addProduct)="onAddCampaign()"
      (deleteSelected)="deleteSelected()"
      (clearSearch)="onClear()"
    />

    <app-campaign-listing
      [campaigns]="campaigns()"
      (edit)="openEditorFor($event)"
      (selectionChange)="bumpSelection()">
    </app-campaign-listing>
  </main>
</div>

<app-campaign-editor
  *ngIf="editorOpen()"
  [value]="editing()"
  [products]="products()"
  [customers]="customers()"
  (close)="closeEditor()"
  (save)="handleSave($event)"
  (delete)="handleDelete($event)">
</app-campaign-editor>