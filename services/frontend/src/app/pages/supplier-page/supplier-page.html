<div class="layout">
  <app-side-nav />

  <main class="content">
    <app-header
      [title]="'Supplier Listing'"
      [query]="query()"
      [deletableCount]="selectedCount()"
      [filterOpen]="filterOpen()"
      [addButtonText]="'+ Add supplier'"
      [showFilters]="false"
      (queryChange)="query.set($event)"
      (openFilters)="onOpenFilters()"
      (addProduct)="onAddSupplier()"
      (deleteSelected)="deleteSelected()"
      (clearSearch)="onClear()"
    />

    <!-- Loading indicator -->
    <div *ngIf="loading()" class="loading-message">
      Loading suppliers...
    </div>
    
    <!-- Deletion indicator -->
    <div *ngIf="deleting()" class="deleting-message">
      Deleting suppliers...
    </div>

    <app-supplier-listing
      [suppliers]="suppliers()"
      (edit)="openEditorFor($event)"
      (selectionChange)="bumpSelection()">
    </app-supplier-listing>
  </main>
</div>

<app-supplier-editor
  *ngIf="editorOpen()"
  [value]="editing()"
  [associatedProducts]="editing() ? getSupplierProducts(editing()!.id) : []"
  [deleting]="deleting()"
  (close)="closeEditor()"
  (save)="handleSave($event)"
  (delete)="handleDelete($event)">
</app-supplier-editor>